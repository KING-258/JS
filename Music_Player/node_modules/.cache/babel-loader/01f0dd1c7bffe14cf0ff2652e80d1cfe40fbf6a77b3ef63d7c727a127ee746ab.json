{"ast":null,"code":"'use strict';\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n  return _typeof(obj);\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n  return _assertThisInitialized(self);\n}\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nvar ChunkedFileData = require('./ChunkedFileData');\nvar MediaFileReader = require('./MediaFileReader');\nvar CHUNK_SIZE = 1024;\nvar XhrFileReader = /*#__PURE__*/function (_MediaFileReader) {\n  _inherits(XhrFileReader, _MediaFileReader);\n  var _super = _createSuper(XhrFileReader);\n  function XhrFileReader(url) {\n    var _this;\n    _classCallCheck(this, XhrFileReader);\n    _this = _super.call(this);\n    _defineProperty(_assertThisInitialized(_this), \"_url\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_fileData\", void 0);\n    _this._url = url;\n    _this._fileData = new ChunkedFileData();\n    return _this;\n  }\n  _createClass(XhrFileReader, [{\n    key: \"_init\",\n    value: function _init(callbacks) {\n      if (XhrFileReader._config.avoidHeadRequests) {\n        this._fetchSizeWithGetRequest(callbacks);\n      } else {\n        this._fetchSizeWithHeadRequest(callbacks);\n      }\n    }\n  }, {\n    key: \"_fetchSizeWithHeadRequest\",\n    value: function _fetchSizeWithHeadRequest(callbacks) {\n      var self = this;\n      this._makeXHRRequest(\"HEAD\", null, {\n        onSuccess: function onSuccess(xhr) {\n          var contentLength = self._parseContentLength(xhr);\n          if (contentLength) {\n            self._size = contentLength;\n            callbacks.onSuccess();\n          } else {\n            // Content-Length not provided by the server, fallback to\n            // GET requests.\n            self._fetchSizeWithGetRequest(callbacks);\n          }\n        },\n        onError: callbacks.onError\n      });\n    }\n  }, {\n    key: \"_fetchSizeWithGetRequest\",\n    value: function _fetchSizeWithGetRequest(callbacks) {\n      var self = this;\n      var range = this._roundRangeToChunkMultiple([0, 0]);\n      this._makeXHRRequest(\"GET\", range, {\n        onSuccess: function onSuccess(xhr) {\n          var contentRange = self._parseContentRange(xhr);\n          var data = self._getXhrResponseContent(xhr);\n          if (contentRange) {\n            if (contentRange.instanceLength == null) {\n              // Last resort, server is not able to tell us the content length,\n              // need to fetch entire file then.\n              self._fetchEntireFile(callbacks);\n              return;\n            }\n            self._size = contentRange.instanceLength;\n          } else {\n            // Range request not supported, we got the entire file\n            self._size = data.length;\n          }\n          self._fileData.addData(0, data);\n          callbacks.onSuccess();\n        },\n        onError: callbacks.onError\n      });\n    }\n  }, {\n    key: \"_fetchEntireFile\",\n    value: function _fetchEntireFile(callbacks) {\n      var self = this;\n      this._makeXHRRequest(\"GET\", null, {\n        onSuccess: function onSuccess(xhr) {\n          var data = self._getXhrResponseContent(xhr);\n          self._size = data.length;\n          self._fileData.addData(0, data);\n          callbacks.onSuccess();\n        },\n        onError: callbacks.onError\n      });\n    }\n  }, {\n    key: \"_getXhrResponseContent\",\n    value: function _getXhrResponseContent(xhr) {\n      return xhr.responseBody || xhr.responseText || \"\";\n    }\n  }, {\n    key: \"_parseContentLength\",\n    value: function _parseContentLength(xhr) {\n      var contentLength = this._getResponseHeader(xhr, \"Content-Length\");\n      if (contentLength == null) {\n        return contentLength;\n      } else {\n        return parseInt(contentLength, 10);\n      }\n    }\n  }, {\n    key: \"_parseContentRange\",\n    value: function _parseContentRange(xhr) {\n      var contentRange = this._getResponseHeader(xhr, \"Content-Range\");\n      if (contentRange) {\n        var parsedContentRange = contentRange.match(/bytes (\\d+)-(\\d+)\\/(?:(\\d+)|\\*)/i);\n        if (!parsedContentRange) {\n          throw new Error(\"FIXME: Unknown Content-Range syntax: \" + contentRange);\n        }\n        return {\n          firstBytePosition: parseInt(parsedContentRange[1], 10),\n          lastBytePosition: parseInt(parsedContentRange[2], 10),\n          instanceLength: parsedContentRange[3] ? parseInt(parsedContentRange[3], 10) : null\n        };\n      } else {\n        return null;\n      }\n    }\n  }, {\n    key: \"loadRange\",\n    value: function loadRange(range, callbacks) {\n      var self = this;\n      if (self._fileData.hasDataRange(range[0], Math.min(self._size, range[1]))) {\n        setTimeout(callbacks.onSuccess, 1);\n        return;\n      } // Always download in multiples of CHUNK_SIZE. If we're going to make a\n      // request might as well get a chunk that makes sense. The big cost is\n      // establishing the connection so getting 10bytes or 1K doesn't really\n      // make a difference.\n\n      range = this._roundRangeToChunkMultiple(range); // Upper range should not be greater than max file size\n\n      range[1] = Math.min(self._size, range[1]);\n      this._makeXHRRequest(\"GET\", range, {\n        onSuccess: function onSuccess(xhr) {\n          var data = self._getXhrResponseContent(xhr);\n          self._fileData.addData(range[0], data);\n          callbacks.onSuccess();\n        },\n        onError: callbacks.onError\n      });\n    }\n  }, {\n    key: \"_roundRangeToChunkMultiple\",\n    value: function _roundRangeToChunkMultiple(range) {\n      var length = range[1] - range[0] + 1;\n      var newLength = Math.ceil(length / CHUNK_SIZE) * CHUNK_SIZE;\n      return [range[0], range[0] + newLength - 1];\n    }\n  }, {\n    key: \"_makeXHRRequest\",\n    value: function _makeXHRRequest(method, range, callbacks) {\n      var xhr = this._createXHRObject();\n      xhr.open(method, this._url);\n      var onXHRLoad = function onXHRLoad() {\n        // 200 - OK\n        // 206 - Partial Content\n        // $FlowIssue - xhr will not be null here\n        if (xhr.status === 200 || xhr.status === 206) {\n          callbacks.onSuccess(xhr);\n        } else if (callbacks.onError) {\n          callbacks.onError({\n            \"type\": \"xhr\",\n            \"info\": \"Unexpected HTTP status \" + xhr.status + \".\",\n            \"xhr\": xhr\n          });\n        }\n        xhr = null;\n      };\n      if (typeof xhr.onload !== 'undefined') {\n        xhr.onload = onXHRLoad;\n        xhr.onerror = function () {\n          if (callbacks.onError) {\n            callbacks.onError({\n              \"type\": \"xhr\",\n              \"info\": \"Generic XHR error, check xhr object.\",\n              \"xhr\": xhr\n            });\n          }\n        };\n      } else {\n        xhr.onreadystatechange = function () {\n          // $FlowIssue - xhr will not be null here\n          if (xhr.readyState === 4) {\n            onXHRLoad();\n          }\n        };\n      }\n      if (XhrFileReader._config.timeoutInSec) {\n        xhr.timeout = XhrFileReader._config.timeoutInSec * 1000;\n        xhr.ontimeout = function () {\n          if (callbacks.onError) {\n            callbacks.onError({\n              \"type\": \"xhr\",\n              // $FlowIssue - xhr.timeout will not be null\n              \"info\": \"Timeout after \" + xhr.timeout / 1000 + \"s. Use jsmediatags.Config.setXhrTimeout to override.\",\n              \"xhr\": xhr\n            });\n          }\n        };\n      }\n      xhr.overrideMimeType(\"text/plain; charset=x-user-defined\");\n      if (range) {\n        this._setRequestHeader(xhr, \"Range\", \"bytes=\" + range[0] + \"-\" + range[1]);\n      }\n      this._setRequestHeader(xhr, \"If-Modified-Since\", \"Sat, 01 Jan 1970 00:00:00 GMT\");\n      xhr.send(null);\n    }\n  }, {\n    key: \"_setRequestHeader\",\n    value: function _setRequestHeader(xhr, headerName, headerValue) {\n      if (XhrFileReader._config.disallowedXhrHeaders.indexOf(headerName.toLowerCase()) < 0) {\n        xhr.setRequestHeader(headerName, headerValue);\n      }\n    }\n  }, {\n    key: \"_hasResponseHeader\",\n    value: function _hasResponseHeader(xhr, headerName) {\n      var allResponseHeaders = xhr.getAllResponseHeaders();\n      if (!allResponseHeaders) {\n        return false;\n      }\n      var headers = allResponseHeaders.split(\"\\r\\n\");\n      var headerNames = [];\n      for (var i = 0; i < headers.length; i++) {\n        headerNames[i] = headers[i].split(\":\")[0].toLowerCase();\n      }\n      return headerNames.indexOf(headerName.toLowerCase()) >= 0;\n    }\n  }, {\n    key: \"_getResponseHeader\",\n    value: function _getResponseHeader(xhr, headerName) {\n      if (!this._hasResponseHeader(xhr, headerName)) {\n        return null;\n      }\n      return xhr.getResponseHeader(headerName);\n    }\n  }, {\n    key: \"getByteAt\",\n    value: function getByteAt(offset) {\n      var character = this._fileData.getByteAt(offset);\n      return character.charCodeAt(0) & 0xff;\n    }\n  }, {\n    key: \"_isWebWorker\",\n    value: function _isWebWorker() {\n      return typeof WorkerGlobalScope !== 'undefined' && self instanceof WorkerGlobalScope;\n    }\n  }, {\n    key: \"_createXHRObject\",\n    value: function _createXHRObject() {\n      if (typeof window === \"undefined\" && !this._isWebWorker()) {\n        // $FlowIssue - flow is not able to recognize this module.\n        return new (require(\"xhr2\").XMLHttpRequest)();\n      }\n      if (typeof XMLHttpRequest !== \"undefined\") {\n        return new XMLHttpRequest();\n      }\n      throw new Error(\"XMLHttpRequest is not supported\");\n    }\n  }], [{\n    key: \"canReadFile\",\n    value: function canReadFile(file) {\n      return typeof file === 'string' && /^[a-z]+:\\/\\//i.test(file);\n    }\n  }, {\n    key: \"setConfig\",\n    value: function setConfig(config) {\n      for (var key in config) {\n        if (config.hasOwnProperty(key)) {\n          this._config[key] = config[key];\n        }\n      }\n      var disallowedXhrHeaders = this._config.disallowedXhrHeaders;\n      for (var i = 0; i < disallowedXhrHeaders.length; i++) {\n        disallowedXhrHeaders[i] = disallowedXhrHeaders[i].toLowerCase();\n      }\n    }\n  }]);\n  return XhrFileReader;\n}(MediaFileReader);\n_defineProperty(XhrFileReader, \"_config\", void 0);\nXhrFileReader._config = {\n  avoidHeadRequests: false,\n  disallowedXhrHeaders: [],\n  timeoutInSec: 30\n};\nmodule.exports = XhrFileReader;","map":{"version":3,"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","_inherits","subClass","superClass","create","value","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","arguments","apply","_possibleConstructorReturn","self","call","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","_defineProperty","ChunkedFileData","require","MediaFileReader","CHUNK_SIZE","XhrFileReader","_MediaFileReader","_super","url","_this","_url","_fileData","_init","callbacks","_config","avoidHeadRequests","_fetchSizeWithGetRequest","_fetchSizeWithHeadRequest","_makeXHRRequest","onSuccess","xhr","contentLength","_parseContentLength","_size","onError","range","_roundRangeToChunkMultiple","contentRange","_parseContentRange","data","_getXhrResponseContent","instanceLength","_fetchEntireFile","addData","responseBody","responseText","_getResponseHeader","parseInt","parsedContentRange","match","Error","firstBytePosition","lastBytePosition","loadRange","hasDataRange","Math","min","setTimeout","newLength","ceil","method","_createXHRObject","open","onXHRLoad","status","onload","onerror","onreadystatechange","readyState","timeoutInSec","timeout","ontimeout","overrideMimeType","_setRequestHeader","send","headerName","headerValue","disallowedXhrHeaders","indexOf","toLowerCase","setRequestHeader","_hasResponseHeader","allResponseHeaders","getAllResponseHeaders","headers","split","headerNames","getResponseHeader","getByteAt","offset","character","charCodeAt","_isWebWorker","WorkerGlobalScope","window","XMLHttpRequest","canReadFile","file","test","setConfig","config","hasOwnProperty","module","exports"],"sources":["/home/el_professor258/Documents/music/node_modules/jsmediatags/build2/XhrFileReader.js"],"sourcesContent":["'use strict';\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar ChunkedFileData = require('./ChunkedFileData');\n\nvar MediaFileReader = require('./MediaFileReader');\n\nvar CHUNK_SIZE = 1024;\n\nvar XhrFileReader = /*#__PURE__*/function (_MediaFileReader) {\n  _inherits(XhrFileReader, _MediaFileReader);\n\n  var _super = _createSuper(XhrFileReader);\n\n  function XhrFileReader(url) {\n    var _this;\n\n    _classCallCheck(this, XhrFileReader);\n\n    _this = _super.call(this);\n\n    _defineProperty(_assertThisInitialized(_this), \"_url\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_fileData\", void 0);\n\n    _this._url = url;\n    _this._fileData = new ChunkedFileData();\n    return _this;\n  }\n\n  _createClass(XhrFileReader, [{\n    key: \"_init\",\n    value: function _init(callbacks) {\n      if (XhrFileReader._config.avoidHeadRequests) {\n        this._fetchSizeWithGetRequest(callbacks);\n      } else {\n        this._fetchSizeWithHeadRequest(callbacks);\n      }\n    }\n  }, {\n    key: \"_fetchSizeWithHeadRequest\",\n    value: function _fetchSizeWithHeadRequest(callbacks) {\n      var self = this;\n\n      this._makeXHRRequest(\"HEAD\", null, {\n        onSuccess: function onSuccess(xhr) {\n          var contentLength = self._parseContentLength(xhr);\n\n          if (contentLength) {\n            self._size = contentLength;\n            callbacks.onSuccess();\n          } else {\n            // Content-Length not provided by the server, fallback to\n            // GET requests.\n            self._fetchSizeWithGetRequest(callbacks);\n          }\n        },\n        onError: callbacks.onError\n      });\n    }\n  }, {\n    key: \"_fetchSizeWithGetRequest\",\n    value: function _fetchSizeWithGetRequest(callbacks) {\n      var self = this;\n\n      var range = this._roundRangeToChunkMultiple([0, 0]);\n\n      this._makeXHRRequest(\"GET\", range, {\n        onSuccess: function onSuccess(xhr) {\n          var contentRange = self._parseContentRange(xhr);\n\n          var data = self._getXhrResponseContent(xhr);\n\n          if (contentRange) {\n            if (contentRange.instanceLength == null) {\n              // Last resort, server is not able to tell us the content length,\n              // need to fetch entire file then.\n              self._fetchEntireFile(callbacks);\n\n              return;\n            }\n\n            self._size = contentRange.instanceLength;\n          } else {\n            // Range request not supported, we got the entire file\n            self._size = data.length;\n          }\n\n          self._fileData.addData(0, data);\n\n          callbacks.onSuccess();\n        },\n        onError: callbacks.onError\n      });\n    }\n  }, {\n    key: \"_fetchEntireFile\",\n    value: function _fetchEntireFile(callbacks) {\n      var self = this;\n\n      this._makeXHRRequest(\"GET\", null, {\n        onSuccess: function onSuccess(xhr) {\n          var data = self._getXhrResponseContent(xhr);\n\n          self._size = data.length;\n\n          self._fileData.addData(0, data);\n\n          callbacks.onSuccess();\n        },\n        onError: callbacks.onError\n      });\n    }\n  }, {\n    key: \"_getXhrResponseContent\",\n    value: function _getXhrResponseContent(xhr) {\n      return xhr.responseBody || xhr.responseText || \"\";\n    }\n  }, {\n    key: \"_parseContentLength\",\n    value: function _parseContentLength(xhr) {\n      var contentLength = this._getResponseHeader(xhr, \"Content-Length\");\n\n      if (contentLength == null) {\n        return contentLength;\n      } else {\n        return parseInt(contentLength, 10);\n      }\n    }\n  }, {\n    key: \"_parseContentRange\",\n    value: function _parseContentRange(xhr) {\n      var contentRange = this._getResponseHeader(xhr, \"Content-Range\");\n\n      if (contentRange) {\n        var parsedContentRange = contentRange.match(/bytes (\\d+)-(\\d+)\\/(?:(\\d+)|\\*)/i);\n\n        if (!parsedContentRange) {\n          throw new Error(\"FIXME: Unknown Content-Range syntax: \" + contentRange);\n        }\n\n        return {\n          firstBytePosition: parseInt(parsedContentRange[1], 10),\n          lastBytePosition: parseInt(parsedContentRange[2], 10),\n          instanceLength: parsedContentRange[3] ? parseInt(parsedContentRange[3], 10) : null\n        };\n      } else {\n        return null;\n      }\n    }\n  }, {\n    key: \"loadRange\",\n    value: function loadRange(range, callbacks) {\n      var self = this;\n\n      if (self._fileData.hasDataRange(range[0], Math.min(self._size, range[1]))) {\n        setTimeout(callbacks.onSuccess, 1);\n        return;\n      } // Always download in multiples of CHUNK_SIZE. If we're going to make a\n      // request might as well get a chunk that makes sense. The big cost is\n      // establishing the connection so getting 10bytes or 1K doesn't really\n      // make a difference.\n\n\n      range = this._roundRangeToChunkMultiple(range); // Upper range should not be greater than max file size\n\n      range[1] = Math.min(self._size, range[1]);\n\n      this._makeXHRRequest(\"GET\", range, {\n        onSuccess: function onSuccess(xhr) {\n          var data = self._getXhrResponseContent(xhr);\n\n          self._fileData.addData(range[0], data);\n\n          callbacks.onSuccess();\n        },\n        onError: callbacks.onError\n      });\n    }\n  }, {\n    key: \"_roundRangeToChunkMultiple\",\n    value: function _roundRangeToChunkMultiple(range) {\n      var length = range[1] - range[0] + 1;\n      var newLength = Math.ceil(length / CHUNK_SIZE) * CHUNK_SIZE;\n      return [range[0], range[0] + newLength - 1];\n    }\n  }, {\n    key: \"_makeXHRRequest\",\n    value: function _makeXHRRequest(method, range, callbacks) {\n      var xhr = this._createXHRObject();\n\n      xhr.open(method, this._url);\n\n      var onXHRLoad = function onXHRLoad() {\n        // 200 - OK\n        // 206 - Partial Content\n        // $FlowIssue - xhr will not be null here\n        if (xhr.status === 200 || xhr.status === 206) {\n          callbacks.onSuccess(xhr);\n        } else if (callbacks.onError) {\n          callbacks.onError({\n            \"type\": \"xhr\",\n            \"info\": \"Unexpected HTTP status \" + xhr.status + \".\",\n            \"xhr\": xhr\n          });\n        }\n\n        xhr = null;\n      };\n\n      if (typeof xhr.onload !== 'undefined') {\n        xhr.onload = onXHRLoad;\n\n        xhr.onerror = function () {\n          if (callbacks.onError) {\n            callbacks.onError({\n              \"type\": \"xhr\",\n              \"info\": \"Generic XHR error, check xhr object.\",\n              \"xhr\": xhr\n            });\n          }\n        };\n      } else {\n        xhr.onreadystatechange = function () {\n          // $FlowIssue - xhr will not be null here\n          if (xhr.readyState === 4) {\n            onXHRLoad();\n          }\n        };\n      }\n\n      if (XhrFileReader._config.timeoutInSec) {\n        xhr.timeout = XhrFileReader._config.timeoutInSec * 1000;\n\n        xhr.ontimeout = function () {\n          if (callbacks.onError) {\n            callbacks.onError({\n              \"type\": \"xhr\",\n              // $FlowIssue - xhr.timeout will not be null\n              \"info\": \"Timeout after \" + xhr.timeout / 1000 + \"s. Use jsmediatags.Config.setXhrTimeout to override.\",\n              \"xhr\": xhr\n            });\n          }\n        };\n      }\n\n      xhr.overrideMimeType(\"text/plain; charset=x-user-defined\");\n\n      if (range) {\n        this._setRequestHeader(xhr, \"Range\", \"bytes=\" + range[0] + \"-\" + range[1]);\n      }\n\n      this._setRequestHeader(xhr, \"If-Modified-Since\", \"Sat, 01 Jan 1970 00:00:00 GMT\");\n\n      xhr.send(null);\n    }\n  }, {\n    key: \"_setRequestHeader\",\n    value: function _setRequestHeader(xhr, headerName, headerValue) {\n      if (XhrFileReader._config.disallowedXhrHeaders.indexOf(headerName.toLowerCase()) < 0) {\n        xhr.setRequestHeader(headerName, headerValue);\n      }\n    }\n  }, {\n    key: \"_hasResponseHeader\",\n    value: function _hasResponseHeader(xhr, headerName) {\n      var allResponseHeaders = xhr.getAllResponseHeaders();\n\n      if (!allResponseHeaders) {\n        return false;\n      }\n\n      var headers = allResponseHeaders.split(\"\\r\\n\");\n      var headerNames = [];\n\n      for (var i = 0; i < headers.length; i++) {\n        headerNames[i] = headers[i].split(\":\")[0].toLowerCase();\n      }\n\n      return headerNames.indexOf(headerName.toLowerCase()) >= 0;\n    }\n  }, {\n    key: \"_getResponseHeader\",\n    value: function _getResponseHeader(xhr, headerName) {\n      if (!this._hasResponseHeader(xhr, headerName)) {\n        return null;\n      }\n\n      return xhr.getResponseHeader(headerName);\n    }\n  }, {\n    key: \"getByteAt\",\n    value: function getByteAt(offset) {\n      var character = this._fileData.getByteAt(offset);\n\n      return character.charCodeAt(0) & 0xff;\n    }\n  }, {\n    key: \"_isWebWorker\",\n    value: function _isWebWorker() {\n      return typeof WorkerGlobalScope !== 'undefined' && self instanceof WorkerGlobalScope;\n    }\n  }, {\n    key: \"_createXHRObject\",\n    value: function _createXHRObject() {\n      if (typeof window === \"undefined\" && !this._isWebWorker()) {\n        // $FlowIssue - flow is not able to recognize this module.\n        return new (require(\"xhr2\").XMLHttpRequest)();\n      }\n\n      if (typeof XMLHttpRequest !== \"undefined\") {\n        return new XMLHttpRequest();\n      }\n\n      throw new Error(\"XMLHttpRequest is not supported\");\n    }\n  }], [{\n    key: \"canReadFile\",\n    value: function canReadFile(file) {\n      return typeof file === 'string' && /^[a-z]+:\\/\\//i.test(file);\n    }\n  }, {\n    key: \"setConfig\",\n    value: function setConfig(config) {\n      for (var key in config) {\n        if (config.hasOwnProperty(key)) {\n          this._config[key] = config[key];\n        }\n      }\n\n      var disallowedXhrHeaders = this._config.disallowedXhrHeaders;\n\n      for (var i = 0; i < disallowedXhrHeaders.length; i++) {\n        disallowedXhrHeaders[i] = disallowedXhrHeaders[i].toLowerCase();\n      }\n    }\n  }]);\n\n  return XhrFileReader;\n}(MediaFileReader);\n\n_defineProperty(XhrFileReader, \"_config\", void 0);\n\nXhrFileReader._config = {\n  avoidHeadRequests: false,\n  disallowedXhrHeaders: [],\n  timeoutInSec: 30\n};\nmodule.exports = XhrFileReader;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}